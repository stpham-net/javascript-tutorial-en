# Coding Style

M√£ c·ªßa ch√∫ng ta ph·∫£i s·∫°ch v√† d·ªÖ ƒë·ªçc nh·∫•t c√≥ th·ªÉ.

ƒê√≥ th·ª±c s·ª± l√† ngh·ªá thu·∫≠t l·∫≠p tr√¨nh -- ƒë·ªÉ th·ª±c hi·ªán m·ªôt nhi·ªám v·ª• ph·ª©c t·∫°p v√† m√£ h√≥a n√≥ theo c√°ch v·ª´a ch√≠nh x√°c v·ª´a c√≥ th·ªÉ ƒë·ªçc ƒë∆∞·ª£c.

## Syntax

D∆∞·ªõi ƒë√¢y l√† m·ªôt cheatsheet v·ªõi m·ªôt s·ªë quy t·∫Øc ƒë∆∞·ª£c ƒë·ªÅ xu·∫•t (xem b√™n d∆∞·ªõi ƒë·ªÉ bi·∫øt th√™m chi ti·∫øt):

![](code-style.png)

B√¢y gi·ªù h√£y th·∫£o lu·∫≠n v·ªÅ c√°c quy t·∫Øc v√† l√Ω do cho ch√∫ng m·ªôt c√°ch chi ti·∫øt.

<br>

> ---

**üìå Irony Detected**

Kh√¥ng c√≥ g√¨ ƒë∆∞·ª£c ƒë·∫∑t trong ƒë√° ·ªü ƒë√¢y. ƒê√¢y l√† nh·ªØng s·ªü th√≠ch phong c√°ch, kh√¥ng ph·∫£i gi√°o ƒëi·ªÅu t√¥n gi√°o.

> ---

<br>

### D·∫•u ngo·∫∑c nh·ªçn

Trong h·∫ßu h·∫øt c√°c d·ª± √°n JavaScript, d·∫•u ngo·∫∑c nh·ªçn ƒë∆∞·ª£c vi·∫øt theo ki·ªÉu "Ai C·∫≠p" v·ªõi d·∫•u ngo·∫∑c m·ªü tr√™n c√πng d√≤ng v·ªõi t·ª´ kh√≥a t∆∞∆°ng ·ª©ng - kh√¥ng ph·∫£i tr√™n m·ªôt d√≤ng m·ªõi. C≈©ng c·∫ßn c√≥ m·ªôt kho·∫£ng tr·∫Øng tr∆∞·ªõc d·∫•u ngo·∫∑c m·ªü, nh∆∞ th·∫ø n√†y:

```js
      if (condition) {
        // do this
        // ...and that
        // ...and that
      }
```

C·∫•u tr√∫c m·ªôt d√≤ng l√† m·ªôt tr∆∞·ªùng h·ª£p g√≥c c·∫°nh quan tr·ªçng. Ch√∫ng ta c√≥ n√™n s·ª≠ d·ª•ng d·∫•u ngo·∫∑c ·ªü t·∫•t c·∫£? N·∫øu c√≥ th√¨ ·ªü ƒë√¢u?

D∆∞·ªõi ƒë√¢y l√† c√°c bi·∫øn th·ªÉ ch√∫ th√≠ch ƒë·ªÉ b·∫°n c√≥ th·ªÉ t·ª± ƒë√°nh gi√° kh·∫£ nƒÉng ƒë·ªçc c·ªßa ch√∫ng:

![](figure-bracket-style.png)

T√≥m t·∫Øt:
- ƒê·ªëi v·ªõi m√£ r·∫•t ng·∫Øn, m·ªôt d√≤ng l√† ch·∫•p nh·∫≠n ƒë∆∞·ª£c. V√≠ d·ª•: `if (cond) return null`.
- Nh∆∞ng m·ªôt d√≤ng ri√™ng cho m·ªói c√¢u trong ngo·∫∑c th∆∞·ªùng d·ªÖ ƒë·ªçc h∆°n.

### ƒê·ªô d√†i c·ªßa d√≤ng (Line Length)

Kh√¥ng ai th√≠ch ƒë·ªçc m·ªôt d√≤ng m√£ ngang d√†i. C√°ch t·ªët nh·∫•t l√† t√°ch ch√∫ng ra v√† gi·ªõi h·∫°n ƒë·ªô d√†i c·ªßa c√°c d√≤ng c·ªßa b·∫°n.

ƒê·ªô d√†i d√≤ng t·ªëi ƒëa ph·∫£i ƒë∆∞·ª£c th·ªèa thu·∫≠n ·ªü c·∫•p ƒë·ªô ƒë·ªôi. N√≥ th∆∞·ªùng l√† 80 ho·∫∑c 120 k√Ω t·ª±.

### th·ª•t l·ªÅ (Indents)

C√≥ hai lo·∫°i th·ª•t l·ªÅ:

- **Th·ª•t l·ªÅ ngang: 2 ho·∫∑c 4 kho·∫£ng tr·∫Øng.**

    M·ªôt th·ª•t l·ªÅ ngang ƒë∆∞·ª£c th·ª±c hi·ªán b·∫±ng c√°ch s·ª≠ d·ª•ng 2 ho·∫∑c 4 kho·∫£ng tr·∫Øng ho·∫∑c bi·ªÉu t∆∞·ª£ng "Tab". Ch·ªçn c√°i n√†o l√† m·ªôt cu·ªôc chi·∫øn th√°nh c≈©. Kho·∫£ng tr·∫Øng ng√†y nay ph·ªï bi·∫øn h∆°n.

    M·ªôt l·ª£i th·∫ø c·ªßa kho·∫£ng tr·∫Øng so v·ªõi tab l√† kho·∫£ng tr·∫Øng cho ph√©p c·∫•u h√¨nh th·ª•t l·ªÅ linh ho·∫°t h∆°n bi·ªÉu t∆∞·ª£ng "Tab".

    Ch·∫≥ng h·∫°n, ch√∫ng ta c√≥ th·ªÉ cƒÉn ch·ªânh c√°c ƒë·ªëi s·ªë v·ªõi d·∫•u ngo·∫∑c m·ªü, nh∆∞ th·∫ø n√†y:

    ```js
    show(parameters,
         aligned, // 5 spaces padding at the left  
         one,
         after,
         another
      ) {
      // ...
    }
    ```

- **Th·ª•t l·ªÅ d·ªçc: c√°c d√≤ng tr·ªëng ƒë·ªÉ chia m√£ th√†nh c√°c kh·ªëi logic.**

    Ngay c·∫£ m·ªôt function duy nh·∫•t th∆∞·ªùng c√≥ th·ªÉ ƒë∆∞·ª£c chia th√†nh c√°c kh·ªëi logic. Trong v√≠ d·ª• d∆∞·ªõi ƒë√¢y, vi·ªác kh·ªüi t·∫°o c√°c bi·∫øn, v√≤ng l·∫∑p ch√≠nh v√† tr·∫£ v·ªÅ k·∫øt qu·∫£ ƒë∆∞·ª£c ph√¢n chia theo chi·ªÅu d·ªçc:

    ```js
    function pow(x, n) {
      let result = 1;
      //              <--
      for (let i = 0; i < n; i++) {
        result *= x;
      }
      //              <--
      return result;
    }
    ```

    Ch√®n m·ªôt d√≤ng m·ªõi b·ªï sung ·ªü n∆°i n√≥ c√≥ th·ªÉ gi√∫p m√£ d·ªÖ ƒë·ªçc h∆°n. Kh√¥ng n√™n c√≥ nhi·ªÅu h∆°n ch√≠n d√≤ng m√£ m√† kh√¥ng c√≥ th·ª•t l·ªÅ d·ªçc.

### Semicolons

M·ªôt d·∫•u ch·∫•m ph·∫©y n√™n c√≥ m·∫∑t sau m·ªói c√¢u, ngay c·∫£ khi n√≥ c√≥ th·ªÉ b·ªã b·ªè qua.

C√≥ nh·ªØng ng√¥n ng·ªØ m√† d·∫•u ch·∫•m ph·∫©y th·ª±c s·ª± l√† t√πy ch·ªçn v√† n√≥ hi·∫øm khi ƒë∆∞·ª£c s·ª≠ d·ª•ng. Tuy nhi√™n, trong JavaScript, c√≥ nh·ªØng tr∆∞·ªùng h·ª£p ng·∫Øt d√≤ng kh√¥ng ƒë∆∞·ª£c hi·ªÉu l√† d·∫•u ch·∫•m ph·∫©y, khi·∫øn m√£ d·ªÖ b·ªã l·ªói.

Khi b·∫°n tr·ªü n√™n tr∆∞·ªüng th√†nh h∆°n v·ªõi t∆∞ c√°ch l√† m·ªôt l·∫≠p tr√¨nh vi√™n, b·∫°n c√≥ th·ªÉ ch·ªçn m·ªôt ki·ªÉu kh√¥ng c√≥ d·∫•u ch·∫•m ph·∫©y nh∆∞ [StandardJS](https://standardjs.com/). Cho ƒë·∫øn khi ƒë√≥, t·ªët nh·∫•t l√† s·ª≠ d·ª•ng d·∫•u ch·∫•m ph·∫©y ƒë·ªÉ tr√°nh nh·ªØng c·∫°m b·∫´y c√≥ th·ªÉ x·∫£y ra.

### C√°c c·∫•p ƒë·ªô l·ªìng (Nesting Levels)

C·ªë g·∫Øng tr√°nh m√£ l·ªìng nhau qu√° nhi·ªÅu c·∫•p ƒë·ªô s√¢u.

ƒê√¥i khi, n√™n s·ª≠ d·ª•ng ch·ªâ th·ªã `continue` trong m·ªôt v√≤ng l·∫∑p ƒë·ªÉ tr√°nh vi·ªác l·ªìng th√™m.

V√≠ d·ª•, thay v√¨ th√™m m·ªôt ƒëi·ªÅu ki·ªán `if` l·ªìng nhau nh∆∞ th·∫ø n√†y:

```js
      for (let i = 0; i < 10; i++) {
        if (cond) {
          ... // <- one more nesting level
        }
      }
```

Ch√∫ng ta c√≥ th·ªÉ vi·∫øt:

```js
      for (let i = 0; i < 10; i++) {
        if (!cond) continue;
        ...  // <- no extra nesting level
      }
```

M·ªôt ƒëi·ªÅu t∆∞∆°ng t·ª± c√≥ th·ªÉ ƒë∆∞·ª£c th·ª±c hi·ªán v·ªõi `if/else` v√† `return`.

V√≠ d·ª•, hai c·∫•u tr√∫c d∆∞·ªõi ƒë√¢y l√† gi·ªëng h·ªát nhau.

L·ª±a ch·ªçn 1:

```js
      function pow(x, n) {
        if (n < 0) {
          alert("Negative 'n' not supported");
        } else {
          let result = 1;

          for (let i = 0; i < n; i++) {
            result *= x;
          }

          return result;
        }  
      }
```

L·ª±a ch·ªçn 2:

```js
      function pow(x, n) {
        if (n < 0) {
          alert("Negative 'n' not supported");
          return;
        }

        let result = 1;

        for (let i = 0; i < n; i++) {
          result *= x;
        }

        return result;
      }
```

C√°i th·ª© hai d·ªÖ ƒë·ªçc h∆°n v√¨ "tr∆∞·ªùng h·ª£p g√≥c c·∫°nh" c·ªßa `n < 0` ƒë∆∞·ª£c x·ª≠ l√Ω s·ªõm. Sau khi ki·ªÉm tra xong, ch√∫ng ta c√≥ th·ªÉ chuy·ªÉn sang lu·ªìng m√£ "ch√≠nh" m√† kh√¥ng c·∫ßn th√™m l·ªìng.

## Function Placement

N·∫øu b·∫°n ƒëang vi·∫øt m·ªôt s·ªë h√†m "helper" v√† m√£ s·ª≠ d·ª•ng ch√∫ng, c√≥ ba c√°ch ƒë·ªÉ t·ªï ch·ª©c c√°c h√†m.

1. C√°c h√†m ƒë∆∞·ª£c khai b√°o ·ªü tr√™n m√£ s·ª≠ d·ª•ng ch√∫ng:

    ```js
    // function declarations
    function createElement() {
      ...
    }

    function setHandler(elem) {
      ...
    }

    function walkAround() {
      ...
    }

    // the code which uses them
    let elem = createElement();
    setHandler(elem);
    walkAround();
    ```
    
2. M√£ tr∆∞·ªõc, sau ƒë√≥ l√† c√°c function

    ```js
    // the code which uses the functions
    let elem = createElement();
    setHandler(elem);
    walkAround();

    // --- helper functions ---
    function createElement() {
      ...
    }

    function setHandler(elem) {
      ...
    }

    function walkAround() {
      ...
    }
    ```
    
3. H·ªón h·ª£p (Mixed): m·ªôt function ƒë∆∞·ª£c khai b√°o khi n√≥ ƒë∆∞·ª£c s·ª≠ d·ª•ng l·∫ßn ƒë·∫ßu ti√™n.

H·∫ßu h·∫øt th·ªùi gian, bi·∫øn th·ªÉ th·ª© hai ƒë∆∞·ª£c ∆∞a th√≠ch.

ƒê√≥ l√† b·ªüi v√¨ khi ƒë·ªçc m√£, tr∆∞·ªõc ti√™n ch√∫ng ta mu·ªën bi·∫øt *n√≥ l√†m g√¨*. N·∫øu m√£ tr∆∞·ªõc, th√¨ n√≥ cung c·∫•p th√¥ng tin ƒë√≥. Sau ƒë√≥, c√≥ l·∫Ω ch√∫ng ta s·∫Ω kh√¥ng c·∫ßn ph·∫£i ƒë·ªçc c√°c function, ƒë·∫∑c bi·ªát n·∫øu t√™n c·ªßa ch√∫ng l√† m√¥ t·∫£ v·ªÅ nh·ªØng g√¨ ch√∫ng th·ª±c s·ª± l√†m.

## Style Guides

M·ªôt style guide ch·ª©a c√°c quy t·∫Øc chung v·ªÅ "c√°ch vi·∫øt" m√£, v√≠ d·ª• s·ª≠ d·ª•ng d·∫•u ngo·∫∑c k√©p n√†o, bao nhi√™u kho·∫£ng tr·∫Øng ƒë·ªÉ th·ª•t l·ªÅ, n∆°i ƒë·∫∑t ng·∫Øt d√≤ng, v.v ... R·∫•t nhi·ªÅu ƒëi·ªÅu nh·ªè.

Khi t·∫•t c·∫£ c√°c th√†nh vi√™n c·ªßa m·ªôt nh√≥m s·ª≠ d·ª•ng c√πng m·ªôt style guide, m√£ c√≥ xu h∆∞·ªõng tr√¥ng ƒë·ªìng nh·∫•t, b·∫•t k·ªÉ th√†nh vi√™n n√†o trong nh√≥m ƒë√£ vi·∫øt n√≥.

T·∫•t nhi√™n, m·ªôt nh√≥m lu√¥n c√≥ th·ªÉ vi·∫øt style guide ri√™ng c·ªßa h·ªç. H·∫ßu h·∫øt th·ªùi gian, kh√¥ng c·∫ßn. C√≥ r·∫•t nhi·ªÅu l·ª±a ch·ªçn ƒë√£ ƒë∆∞·ª£c th·ª≠ v√† ƒë√∫ng ƒë·ªÉ l·ª±a ch·ªçn, v√¨ v·∫≠y vi·ªác √°p d·ª•ng m·ªôt trong nh·ªØng l·ª±a ch·ªçn n√†y th∆∞·ªùng l√† ƒë·∫∑t c∆∞·ª£c t·ªët nh·∫•t c·ªßa b·∫°n.

M·ªôt s·ªë l·ª±a ch·ªçn ph·ªï bi·∫øn:

- [Google JavaScript Style Guide](https://google.github.io/styleguide/javascriptguide.xml)
- [Airbnb JavaScript Style Guide](https://github.com/airbnb/javascript)
- [Idiomatic.JS](https://github.com/rwaldron/idiomatic.js)
- [StandardJS](https://standardjs.com/)
- (plus many more)

N·∫øu b·∫°n l√† m·ªôt nh√† ph√°t tri·ªÉn m·ªõi, h√£y b·∫Øt ƒë·∫ßu v·ªõi cheatsheet ·ªü ƒë·∫ßu ch∆∞∆°ng n√†y. Khi b·∫°n ƒë√£ th√†nh th·∫°o b·∫°n c√≥ th·ªÉ duy·ªát c√°c style guide kh√°c ƒë·ªÉ ch·ªçn c√°c nguy√™n t·∫Øc chung v√† quy·∫øt ƒë·ªãnh xem b·∫°n th√≠ch c√°i n√†o nh·∫•t.

## Automated Linters

Linters l√† c√°c c√¥ng c·ª• c√≥ th·ªÉ t·ª± ƒë·ªông ki·ªÉm tra style m√£ c·ªßa b·∫°n v√† ƒë∆∞a ra c√°c ƒë·ªÅ xu·∫•t ƒë·ªÉ t√°i c·∫•u tr√∫c.

ƒêi·ªÅu tuy·ªát v·ªùi ·ªü ch√∫ng l√† style-checking c≈©ng c√≥ th·ªÉ t√¨m th·∫•y m·ªôt s·ªë l·ªói, nh∆∞ l·ªói ch√≠nh t·∫£ trong t√™n bi·∫øn ho·∫∑c h√†m. Do t√≠nh nƒÉng n√†y, vi·ªác c√†i ƒë·∫∑t m·ªôt linter ƒë∆∞·ª£c khuy·∫øn ngh·ªã ngay c·∫£ khi b·∫°n kh√¥ng mu·ªën d√≠nh v√†o m·ªôt "code style" c·ª• th·ªÉ.

D∆∞·ªõi ƒë√¢y l√† c√°c c√¥ng c·ª• linting n·ªïi ti·∫øng nh·∫•t:

- [JSLint](http://www.jslint.com/) -- one of the first linters.
- [JSHint](http://www.jshint.com/) -- more settings than JSLint.
- [ESLint](http://eslint.org/) -- probably the newest one.

T·∫•t c·∫£ ƒë·ªÅu c√≥ th·ªÉ l√†m ƒë∆∞·ª£c vi·ªác. T√°c gi·∫£ s·ª≠ d·ª•ng [ESLint](http://eslint.org/).

H·∫ßu h·∫øt c√°c linters ƒë∆∞·ª£c t√≠ch h·ª£p v·ªõi nhi·ªÅu tr√¨nh so·∫°n th·∫£o ph·ªï bi·∫øn: ch·ªâ c·∫ßn k√≠ch ho·∫°t plugin trong tr√¨nh ch·ªânh s·ª≠a v√† ƒë·ªãnh c·∫•u h√¨nh style.

V√≠ d·ª•, ƒë·ªëi v·ªõi ESLint, b·∫°n n√™n l√†m nh∆∞ sau:

1. C√†i ƒë·∫∑t [Node.JS](https://nodejs.org/).
2. C√†i ƒë·∫∑t ESLint b·∫±ng l·ªánh `npm install -g eslint` (npm l√† tr√¨nh c√†i ƒë·∫∑t g√≥i JavaScript).
3. T·∫°o m·ªôt t·ªáp c·∫•u h√¨nh c√≥ t√™n `.eslintrc` trong th∆∞ m·ª•c g·ªëc c·ªßa d·ª± √°n JavaScript c·ªßa b·∫°n (trong th∆∞ m·ª•c ch·ª©a t·∫•t c·∫£ c√°c t·ªáp c·ªßa b·∫°n).
4. C√†i ƒë·∫∑t/k√≠ch ho·∫°t plugin cho tr√¨nh so·∫°n th·∫£o c·ªßa b·∫°n t√≠ch h·ª£p v·ªõi ESLint. Ph·∫ßn l·ªõn c√°c editor c√≥ m·ªôt c√°i.

ƒê√¢y l√† m·ªôt v√≠ d·ª• v·ªÅ t·ªáp `.eslintrc`:

```js
      {
        "extends": "eslint:recommended",
        "env": {
          "browser": true,
          "node": true,
          "es6": true
        },
        "rules": {
          "no-console": 0,
        },
        "indent": 2
      }
```

·ªû ƒë√¢y, l·ªánh `"extends"` bi·ªÉu th·ªã r·∫±ng c·∫•u h√¨nh ƒë∆∞·ª£c d·ª±a tr√™n t·∫≠p c√†i ƒë·∫∑t "eslint:recommended". Sau ƒë√≥, ch√∫ng ta ch·ªâ ƒë·ªãnh ri√™ng c·ªßa ch√∫ng ta.

C≈©ng c√≥ th·ªÉ t·∫£i xu·ªëng c√°c b·ªô quy t·∫Øc style t·ª´ web v√† m·ªü r·ªông ch√∫ng. Xem <http://eslint.org/docs/user-guide/getting-started> ƒë·ªÉ bi·∫øt th√™m chi ti·∫øt v·ªÅ c√†i ƒë·∫∑t.

Ngo√†i ra, m·ªôt s·ªë IDE nh·∫•t ƒë·ªãnh c√≥ linting t√≠ch h·ª£p, ti·ªán l·ª£i nh∆∞ng kh√¥ng th·ªÉ t√πy ch·ªânh nh∆∞ ESLint.

## T√≥m l∆∞·ª£c

T·∫•t c·∫£ c√°c quy t·∫Øc c√∫ ph√°p ƒë∆∞·ª£c m√¥ t·∫£ trong ch∆∞∆°ng n√†y (v√† trong c√°c style guide ƒë∆∞·ª£c tham chi·∫øu) nh·∫±m m·ª•c ƒë√≠ch tƒÉng kh·∫£ nƒÉng ƒë·ªçc m√£ c·ªßa b·∫°n, nh∆∞ng t·∫•t c·∫£ ch√∫ng ƒë·ªÅu g√¢y tranh c√£i.

Khi ch√∫ng ta nghƒ© v·ªÅ vi·ªác vi·∫øt m√£ "t·ªët h∆°n", c√°c c√¢u h·ªèi ch√∫ng ta n√™n ƒë·∫∑t ra l√† "ƒêi·ªÅu g√¨ l√†m cho m√£ d·ªÖ ƒë·ªçc h∆°n v√† d·ªÖ hi·ªÉu h∆°n?" v√† "ƒêi·ªÅu g√¨ c√≥ th·ªÉ gi√∫p ch√∫ng ta tr√°nh l·ªói?" ƒê√¢y l√† nh·ªØng ƒëi·ªÅu ch√≠nh c·∫ßn ghi nh·ªõ khi l·ª±a ch·ªçn v√† th·∫£o lu·∫≠n v·ªÅ c√°c code style.

ƒê·ªçc c√°c h∆∞·ªõng d·∫´n style ph·ªï bi·∫øn s·∫Ω cho ph√©p b·∫°n c·∫≠p nh·∫≠t nh·ªØng √Ω t∆∞·ªüng m·ªõi nh·∫•t v·ªÅ xu h∆∞·ªõng code style v√† th·ª±c ti·ªÖn t·ªët nh·∫•t.
